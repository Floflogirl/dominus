#include <stdio.h>
#include "ArduinoCallback.hpp"

//==============================================================================
//
// Cst / Dst
//
//==============================================================================
//------------------------------------------------------------------------------
// cst
//------------------------------------------------------------------------------
ArduinoCallback::ArduinoCallback(SerialPort *arduino_port) :
    _arduino_port(arduino_port),
    ReactorCallback(arduino_port->get_fd())
{
}

//==============================================================================
//
// Public methods
//
//==============================================================================
//------------------------------------------------------------------------------
// cb
//------------------------------------------------------------------------------
void ArduinoCallback::cb()
{
    uint8_t buffer[256];
    uint32_t bytes =_arduino_port->read_data(buffer);
    
    for(size_t j=0; j<bytes; j++)
        printf("%02x ", buffer[j]);
    printf("\n");
}
